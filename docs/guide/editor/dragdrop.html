
<!DOCTYPE html>
<html lang="en">
    <head>
    
        <title>FairyGUI - Drag&Drop</title>
    
        <meta charset="utf-8">
        <meta name="description" content="FairyGUI Docs">
        <meta name="keywords" content="FairyGUI,FGUI,FairyGUI Docs">
        
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="-Drag&DropFairyGUI">
        <meta property="og:description" content="FairyGUI Docs">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Drag&Drop — FairyGUI">
        <meta name="twitter:description" content="FairyGUI Docs">

      <!--  <link href='//fonts.proxy.ustclug.org/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'> -->

        <!-- main page styles -->
        <link rel="stylesheet" href="/docs/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/docs/js/vue.min.js"></script>
        <script>window.PAGE_TYPE = "guide_editor"</script>
    </head>
    <body class="docs">        <div id="mobile-bar"  data-bg-text="FairyGUI" >
            <a class="menu-button"></a>
        </div>
        <div id="header">
  <ul id="nav">
    <li><a href="/docs/guide/" class="nav-link current">Manual</a></li>
<li><a href="/docs/examples/" class="nav-link">Examples</a></li>
<li><a href="/docs/release_notes/" class="nav-link">Release Notes</a></li>
<li><a href="/" class="nav-link">Home</a></li>
  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li><a href="/docs/guide/" class="nav-link current">Manual</a></li>
<li><a href="/docs/examples/" class="nav-link">Examples</a></li>
<li><a href="/docs/release_notes/" class="nav-link">Release Notes</a></li>
<li><a href="/" class="nav-link">Home</a></li>
    </ul>
    <div class="list">
        <ul class="menu-root">
            

	 			
	                
	                <li>
	                    <a href="/docs/guide/index.html" class="sidebar-link">Getting Start</a>
	                </li>
	            
	
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/index.html" class="sidebar-link">Basis</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/project_settings.html" class="sidebar-link">Project Settings</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/package.html" class="sidebar-link">Package</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/branch.html" class="sidebar-link">Branch</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/publish.html" class="sidebar-link">Publish</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/object.html" class="sidebar-link">Object</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/image.html" class="sidebar-link">Image</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/movieclip.html" class="sidebar-link">MovieClip</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/graph.html" class="sidebar-link">Graph</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/loader.html" class="sidebar-link">Loader</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/text.html" class="sidebar-link">Text</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/richtext.html" class="sidebar-link">Rich Text</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/group.html" class="sidebar-link">Group</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/component.html" class="sidebar-link">Component</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/scrollpane.html" class="sidebar-link">ScrollPane</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/controller.html" class="sidebar-link">Controller</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/relation.html" class="sidebar-link">Relation</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/label.html" class="sidebar-link">Label</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/button.html" class="sidebar-link">Button</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/combobox.html" class="sidebar-link">ComboBox</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/progressbar.html" class="sidebar-link">ProgressBar</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/slider.html" class="sidebar-link">Slider</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/scrollbar.html" class="sidebar-link">ScrollBar</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/list.html" class="sidebar-link">List</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/tree.html" class="sidebar-link">Tree</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/popup.html" class="sidebar-link">Popup</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/dragdrop.html" class="sidebar-link current">Drag&Drop</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/window.html" class="sidebar-link">Window</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/transition.html" class="sidebar-link">Transition</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/adaptation.html" class="sidebar-link">Adaptation</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/i18n.html" class="sidebar-link">i18n</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/export.html" class="sidebar-link">Import/Export</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/preference.html" class="sidebar-link">Preference</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/plugin.html" class="sidebar-link">Plugin</a>
	                </li>
	            
	
	            
	                
	                
	                <li><h3>SDK</h3></li>
	                
	                <li>
	                    <a href="/docs/guide/sdk/laya.html" class="sidebar-link">LayaAir</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/egret.html" class="sidebar-link">Egret</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/cocos2dx.html" class="sidebar-link">Cocos2dx</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/creator.html" class="sidebar-link">Cocos Creator</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/cryengine.html" class="sidebar-link">Cry Engine</a>
	                </li>
	            

	            
	                
	                
	                <li><h3>SDK - Unity</h3></li>
	                
	                <li>
	                    <a href="/docs/guide/unity/index.html" class="sidebar-link">Basis</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/transform.html" class="sidebar-link">Transform</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/atlas.html" class="sidebar-link">Atlas</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/font.html" class="sidebar-link">Fonts</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/input.html" class="sidebar-link">Input</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/event.html" class="sidebar-link">Event</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/insert3d.html" class="sidebar-link">Insert 3D</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/uipainter.html" class="sidebar-link">Curved UI</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/drawcall.html" class="sidebar-link">DrawCall</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/lua.html" class="sidebar-link">Lua</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/special.html" class="sidebar-link">Special</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/faq.html" class="sidebar-link">FAQ</a>
	                </li>
	            

            
        </ul>
    </div>
</div>


<div class="content guide_editor with-sidebar ">
    
      <h1>Drag&Drop</h1>
    
    <h2 id="Free drag and drop"><a class="header-anchor" href="#Free drag and drop">¶</a> Free drag and drop</h2>
<p>To make a component draggable, it’s very simple, just set the draggable property, for example:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">aObject.draggable = <span class="literal">true</span>;</div></pre></td></tr></table></figure>
<p>After setting, when the player holds the component, they can drag it at will. You can set a rectangle to limit the drag range:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Note that the rectangular range here uses the coordinates on the stage, not the local coordinates of the component.</span></div><div class="line">    aObject.dragBounds = <span class="keyword">new</span> Rect (<span class="number">100</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">200</span>);</div></pre></td></tr></table></figure>
<p>You can get notifications about the start of dragging, the process of dragging, and the end of dragging:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="comment">//Unity/Cry</span></div><div class="line">    aObject.onDragStart.Add(onDragStart);</div><div class="line">    aObject.onDragMove.Add(onDragMove);</div><div class="line">    aObject.onDragEnd.Add(onDragEnd);</div><div class="line"></div><div class="line">    <span class="comment">//AS3</span></div><div class="line">    aObject.addEventListener(DragEvent.DRAG_START, onDragStart);</div><div class="line">    aObject.addEventListener(DragEvent.DRAG_MOVING, onDragMove);</div><div class="line">    aObject.addEventListener(DragEvent.DRAG_END, onDragEnd);</div><div class="line"></div><div class="line">    <span class="comment">//Egret</span></div><div class="line">    aObject.addEventListener(fairygui.DragEvent.DRAG_START, <span class="keyword">this</span>.onDragStart, <span class="keyword">this</span>);</div><div class="line">    aObject.addEventListener(fairygui.DragEvent.DRAG_MOVING, <span class="keyword">this</span>.onDragMove, <span class="keyword">this</span>);</div><div class="line">    aObject.addEventListener(fairygui.DragEvent.DRAG_END, <span class="keyword">this</span>.onDragEnd, <span class="keyword">this</span>);</div><div class="line"></div><div class="line">    <span class="comment">//Laya</span></div><div class="line">    aObject.<span class="keyword">on</span>(fairygui.Events.DRAG_START, <span class="keyword">this</span>, <span class="keyword">this</span>.onDragStart);</div><div class="line">    aObject.<span class="keyword">on</span>(fairygui.Events.DRAG_MOVE, <span class="keyword">this</span>, <span class="keyword">this</span>.onDragMove);</div><div class="line">    aObject.<span class="keyword">on</span>(fairygui.Events.DRAG_END, <span class="keyword">this</span>, <span class="keyword">this</span>.onDragEnd);</div><div class="line"></div><div class="line">    <span class="comment">//Cocos2dx</span></div><div class="line">    aObject-&gt;addEventListener(UIEventType::DragStart, CC_CALLBACK_1(AClass::onDragStart, this));</div><div class="line">    aObject-&gt;addEventListener(UIEventType::DragMove, CC_CALLBACK_1(AClass::onDragMove, this));</div><div class="line">    aObject-&gt;addEventListener(UIEventType::DragEnd, CC_CALLBACK_1(AClass::onDragEnd, this));</div><div class="line"></div><div class="line">    <span class="comment">//CocosCreator</span></div><div class="line">    aObject.<span class="keyword">on</span>(fgui.Event.DRAG_START, <span class="keyword">this</span>.onDragStart, <span class="keyword">this</span>);</div><div class="line">    aObject.<span class="keyword">on</span>(fgui.Event.DRAG_MOVING, <span class="keyword">this</span>.onDragMove, <span class="keyword">this</span>);</div><div class="line">    aObject.<span class="keyword">on</span>(fgui.Event.DRAG_END, <span class="keyword">this</span>.onDragEnd, <span class="keyword">this</span>);</div></pre></td></tr></table></figure>
<h2 id="Alternative drag"><a class="header-anchor" href="#Alternative drag">¶</a> Alternative drag</h2>
<p>If you don’t want to click anywhere on the component and drag it, you can use alternative drag. For example, the window in FairyGUI, click its title bar, you can drag the window, we use this as an example to analyze how to achieve:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Set the drag area to be draggable, and then listen for the drag start event</span></div><div class="line">    _dragArea.draggable = <span class="literal">true</span>;</div><div class="line">    _dragArea.onDragStart.Add (onDragStart);</div><div class="line"></div><div class="line">    <span class="comment">// Unity / Cry / MonoGame</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onDragStart</span> (<span class="params">EventContext context</span>)</span></div><div class="line"><span class="function">    </span>&#123;</div><div class="line">        <span class="comment">// Cancel the source drag, that is, _dragArea will not be dragged actually</span></div><div class="line">        context.PreventDefault ();</div><div class="line">    </div><div class="line">        <span class="comment">// Set the window to be dragged. context.data is the id of the finger.</span></div><div class="line">        <span class="keyword">this</span>.StartDrag ((<span class="keyword">int</span>) context.data);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Laya</span></div><div class="line">    onDragStart (evt: laya.events.Event) &#123;</div><div class="line">        <span class="keyword">var</span> obj: fairygui.GObject = fairygui.GObject.cast (evt.currentTarget);</div><div class="line"></div><div class="line">        <span class="comment">// Cancel the original target and replace it with a substitute</span></div><div class="line">        obj.stopDrag ();</div><div class="line"></div><div class="line">        <span class="keyword">this</span>.startDrag ();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// CocosCreator</span></div><div class="line">    onDragStart (evt: fgui.Event) &#123;</div><div class="line">        <span class="keyword">let</span> obj: fgui.GObject = fgui.GObject.cast (evt.currentTarget);</div><div class="line">        </div><div class="line">        <span class="comment">// Cancel the original target and replace it with a substitute</span></div><div class="line">        obj.stopDrag ();</div><div class="line"></div><div class="line">        <span class="keyword">this</span>.startDrag ();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>In the above way, when _dragArea is attempted to be dragged, it will be converted to the drag of the Window itself.</p>
<h2 id="Substitute drag"><a class="header-anchor" href="#Substitute drag">¶</a> Substitute drag</h2>
<p>Dragging can only be moved within the parent component of the component. If you need to move within the full screen, you need to use dragging by substitute. The startup method of avatar drag needs to be converted first:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">aObject.draggable = <span class="literal">true</span>;</div><div class="line">    aObject.onDragStart.Add (onDragStart);</div><div class="line"></div><div class="line">    <span class="comment">// Unity / Cry / MonoGame</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onDragStart</span> (<span class="params">EventContext context</span>)</span></div><div class="line"><span class="function">    </span>&#123;</div><div class="line">        <span class="comment">// Cancel source drag</span></div><div class="line">        context.PreventDefault ();</div><div class="line">    </div><div class="line">        <span class="comment">// icon is the avatar image of this object, userData can be arbitrary data, and the underlying layer does not parse it. context.data is the id of the finger.</span></div><div class="line">        DragDropManager.inst.StartDrag (<span class="literal">null</span>, icon, userData, (<span class="keyword">int</span>) context.data);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>After using the double drag, if you want to detect the end of the drag, you can no longer listen to the original object, you should use:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="comment">//Unity/Cry/MonoGame</span></div><div class="line">    DragDropManager.inst.dragAgent.onDragEnd.Add(onDragEnd);</div><div class="line"></div><div class="line">    <span class="comment">//CocosCreator</span></div><div class="line">    DragDropManager.inst.dragAgent.<span class="keyword">on</span>(fgui.Event.DRAG_END, <span class="keyword">this</span>.onDragEnd, <span class="keyword">this</span>);</div></pre></td></tr></table></figure>
<p>DragDropManager also provides the commonly used drag-&gt; drop function. If a component needs to receive events that other components drag into it and release, you can use:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">aComponent.onDrop.Add (onDrop);</div><div class="line"></div><div class="line">    <span class="comment">// Unity / Cry / MonoGame</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onDrop</span> (<span class="params">EventContext context</span>)</span></div><div class="line"><span class="function">    </span>&#123;</div><div class="line">        <span class="comment">// here context.data is the userData passed in StartDrag</span></div><div class="line">        Debug.Log (context.data);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// CocosCreator</span></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">onDrop</span> (<span class="params">dropTarget: fgui.GObject, userData: any</span>) </span>&#123;</div><div class="line">        <span class="comment">// here sourceData is the userData passed in by StartDrag</span></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>DragDropManager uses an image resource to represent the alias. This image is displayed by the loader. This loader is DragDropManager.inst.dragAgent, you can adjust its parameters to fit the actual project needs.</p>
<p>If your stand-in is not as simple as an image, for example, you need to use a component as a stand-in, then you can define your own DragDropManager, copy a DragDropManager directly, modify and write your own logic on it, and then use your DragDropManager. The design of the DragDropManager class does not take into account all practical situations, it is only used as a reference.</p>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.6.0/katex.min.css">
    
    <div class="footer">
      found mistake? Want to participate in editing?
      <a href="https://github.com/fairygui/en.fairygui.io/tree/master/src/guide/editor/dragdrop.md" target="_blank">
        Edit this page on Github!
      </a>
    </div>
</div>

                
            </div>
            <script src="/docs/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->        
        <script src="/docs/js/css.escape.js"></script>
        <script src="/docs/js/common.js"></script>
    </body>
</html>
