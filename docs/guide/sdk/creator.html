
<!DOCTYPE html>
<html lang="en">
    <head>
    
        <title>FairyGUI - Cocos Creator</title>
    
        <meta charset="utf-8">
        <meta name="description" content="FairyGUI Docs">
        <meta name="keywords" content="FairyGUI,FGUI,FairyGUI Docs">
        
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="-Cocos CreatorFairyGUI">
        <meta property="og:description" content="FairyGUI Docs">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Cocos Creator — FairyGUI">
        <meta name="twitter:description" content="FairyGUI Docs">

      <!--  <link href='//fonts.proxy.ustclug.org/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'> -->

        <!-- main page styles -->
        <link rel="stylesheet" href="/docs/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/docs/js/vue.min.js"></script>
        <script>window.PAGE_TYPE = "guide_sdk"</script>
    </head>
    <body class="docs">        <div id="mobile-bar"  data-bg-text="FairyGUI" >
            <a class="menu-button"></a>
        </div>
        <div id="header">
  <ul id="nav">
    <li><a href="/docs/guide/" class="nav-link current">Manual</a></li>
<li><a href="/docs/examples/" class="nav-link">Examples</a></li>
<li><a href="/docs/release_notes/" class="nav-link">Release Notes</a></li>
<li><a href="/" class="nav-link">Home</a></li>
  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li><a href="/docs/guide/" class="nav-link current">Manual</a></li>
<li><a href="/docs/examples/" class="nav-link">Examples</a></li>
<li><a href="/docs/release_notes/" class="nav-link">Release Notes</a></li>
<li><a href="/" class="nav-link">Home</a></li>
    </ul>
    <div class="list">
        <ul class="menu-root">
            

	 			
	                
	                <li>
	                    <a href="/docs/guide/index.html" class="sidebar-link">Getting Start</a>
	                </li>
	            
	
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/index.html" class="sidebar-link">Basis</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/project_settings.html" class="sidebar-link">Project Settings</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/package.html" class="sidebar-link">Package</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/branch.html" class="sidebar-link">Branch</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/publish.html" class="sidebar-link">Publish</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/object.html" class="sidebar-link">Object</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/image.html" class="sidebar-link">Image</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/movieclip.html" class="sidebar-link">MovieClip</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/graph.html" class="sidebar-link">Graph</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/loader.html" class="sidebar-link">Loader</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/text.html" class="sidebar-link">Text</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/richtext.html" class="sidebar-link">Rich Text</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/group.html" class="sidebar-link">Group</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/component.html" class="sidebar-link">Component</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/scrollpane.html" class="sidebar-link">ScrollPane</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/controller.html" class="sidebar-link">Controller</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/relation.html" class="sidebar-link">Relation</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/label.html" class="sidebar-link">Label</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/button.html" class="sidebar-link">Button</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/combobox.html" class="sidebar-link">ComboBox</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/progressbar.html" class="sidebar-link">ProgressBar</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/slider.html" class="sidebar-link">Slider</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/scrollbar.html" class="sidebar-link">ScrollBar</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/list.html" class="sidebar-link">List</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/tree.html" class="sidebar-link">Tree</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/popup.html" class="sidebar-link">Popup</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/dragdrop.html" class="sidebar-link">Drag&Drop</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/window.html" class="sidebar-link">Window</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/transition.html" class="sidebar-link">Transition</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/adaptation.html" class="sidebar-link">Adaptation</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/i18n.html" class="sidebar-link">i18n</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/export.html" class="sidebar-link">Import/Export</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/preference.html" class="sidebar-link">Preference</a>
	                </li>
	            
	                
	                <li>
	                    <a href="/docs/guide/editor/plugin.html" class="sidebar-link">Plugin</a>
	                </li>
	            
	
	            
	                
	                
	                <li><h3>SDK</h3></li>
	                
	                <li>
	                    <a href="/docs/guide/sdk/laya.html" class="sidebar-link">LayaAir</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/egret.html" class="sidebar-link">Egret</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/cocos2dx.html" class="sidebar-link">Cocos2dx</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/creator.html" class="sidebar-link current">Cocos Creator</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/sdk/cryengine.html" class="sidebar-link">Cry Engine</a>
	                </li>
	            

	            
	                
	                
	                <li><h3>SDK - Unity</h3></li>
	                
	                <li>
	                    <a href="/docs/guide/unity/index.html" class="sidebar-link">Basis</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/transform.html" class="sidebar-link">Transform</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/atlas.html" class="sidebar-link">Atlas</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/font.html" class="sidebar-link">Fonts</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/input.html" class="sidebar-link">Input</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/event.html" class="sidebar-link">Event</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/insert3d.html" class="sidebar-link">Insert 3D</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/uipainter.html" class="sidebar-link">Curved UI</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/drawcall.html" class="sidebar-link">DrawCall</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/lua.html" class="sidebar-link">Lua</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/special.html" class="sidebar-link">Special</a>
	                </li>
	            
	                
	                
	                <li>
	                    <a href="/docs/guide/unity/faq.html" class="sidebar-link">FAQ</a>
	                </li>
	            

            
        </ul>
    </div>
</div>


<div class="content guide_sdk with-sidebar ">
    
      <h1>Cocos Creator</h1>
    
    <h2 id="Run-Demo"><a href="#Run-Demo" class="headerlink" title="Run Demo"></a>Run Demo</h2><ol>
<li>From GitHub Clone or from<a href="../../product/index.html#CocosCreator SDK">Official website product page</a> Download the example of FairyGUI-cocoscreator directly.</li>
<li>The SDK is based on Cocos Creator 2.x version, 1.x version is not supported, so please use Creator version 2.0 or above, 2.0.7 or above is recommended.</li>
<li>Use Cocos Creator to open the downloaded example project.</li>
<li>You can see the effect by running directly.</li>
<li>The UI interface project is in the UIProject directory. You need to use the FairyGUI editor to open it for viewing and modification. This part of the file is independent of the Creator and does not need to be placed in the Creator’s assets directory.</li>
<li>The examples are written using TS, but the core library is fairygui.js, so there is no problem developing with JS.</li>
<li>fairygui.js is uncompressed, cocos will compress itself when released, and the final size will be around 300K.</li>
</ol>
<h2 id="Load-UI-package"><a href="#Load-UI-package" class="headerlink" title="Load UI package"></a>Load UI package</h2><p>FairyGUI organizes the UI interface by package. A UI package may include one or more interfaces. After each UI package is released, it will get a description file with a suffix of bin file, and one or more images as the texture set. These files need to be placed in the resources directory for dynamic loading. Because in order to avoid complex dependencies, management difficulties will be brought about in the future. Our interface is not directly referenced by things in the scene. A UI package can be loaded and unloaded at any time.</p>
<p>Publish the package directly to Creator’s assets / resources directory or its subdirectory in FairyGUI editor.</p>
<p><img src="../../images/20181214102714.png" alt=""></p>
<p>Note that the image can be set to RAW format, and does not need to be set to Sprite. Because FairyGUI will analyze Sprite by itself.</p>
<p>There are two ways to load packages in code. One is to load the file, and the other is to let FairyGUI load it by itself. The first way is to make it easier for you to do an overall load mixed with other resources, or to display the needs of progress.</p>
<p>The first way:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Filled here is relative to the path in resources</span></div><div class="line">    <span class="keyword">let</span> res = [</div><div class="line">        <span class="string">"UI/Bag"</span>, <span class="comment">// Description file</span></div><div class="line">        <span class="string">"UI/Bag_atlas0"</span> <span class="comment">// Texture set</span></div><div class="line">    ];</div><div class="line">    cc.loader.loadResArray (res, function (err, assets) &#123;</div><div class="line">        <span class="comment">// Call addPackage after both are loaded</span></div><div class="line">        fgui.UIPackage.addPackage (<span class="string">"UI/Bag"</span>);</div><div class="line"></div><div class="line">        <span class="comment">// You can start creating the interface in the package below.</span></div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>The second way:<br><figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Filled here is relative to the path in resources</span></div><div class="line">    fgui.UIPackage.loadPackage (<span class="string">"UI/Bag"</span>, function (err) &#123;</div><div class="line">        <span class="comment">// You don't need to call addPackage here, you can start creating the interface directly.</span></div><div class="line">    &#125;);</div></pre></td></tr></table></figure></p>
<h2 id="Uninstall-UI-pack"><a href="#Uninstall-UI-pack" class="headerlink" title="Uninstall UI pack"></a>Uninstall UI pack</h2><p>When a package is no longer used, it can be uninstalled.</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Here you can use the package id, package name, and package path.</span></div><div class="line">    fgui.UIPackage.removePackage (<span class="string">"Bag"</span>);</div></pre></td></tr></table></figure>
<p>After the package is uninstalled, all the resources such as textures contained in the package will be uninstalled, and the components created in the package will not display properly (although no error will be reported), so these components should (or have been) destroyed.<br>Frequent loading and unloading of packages is generally not recommended, because each loading and unloading must consume CPU time (meaning power consumption) and generate a lot of GC. The memory occupied by the UI system can be accurately estimated. You can set which packages are resident in memory according to the frequency of use of the packages (as much as possible is recommended).</p>
<h2 id="Create-GRoot"><a href="#Create-GRoot" class="headerlink" title="Create GRoot"></a>Create GRoot</h2><p>Every scene needs to have a GRoot, which is the root node of the UI. After the scene loads, you need to manually create a GRoot.</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">fgui.GRoot.create ();</div></pre></td></tr></table></figure>
<h2 id="Create-UI"><a href="#Create-UI" class="headerlink" title="Create UI"></a>Create UI</h2><figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> view: fgui.GComponent = fgui.UIPackage.createObject (<span class="string">"package name"</span>, <span class="string">"component name"</span>). asCom;</div><div class="line">    </div><div class="line">    <span class="comment">// The following methods can display the view:</span></div><div class="line">    </div><div class="line">    <span class="comment">// 1, directly added to GRoot and displayed</span></div><div class="line">    fgui.GRoot.inst.addChild (view);</div><div class="line">    </div><div class="line">    <span class="comment">// 2, use window display</span></div><div class="line">    aWindow.contentPane = view;</div><div class="line">    aWindow.show ();</div><div class="line">    </div><div class="line">    <span class="comment">// 3, add to other components</span></div><div class="line">    aComponnent.addChild (view);</div></pre></td></tr></table></figure>
<p>If the content of the interface is too much, it may cause a freeze when creating. FairyGUI provides a way to create the UI asynchronously. In the asynchronous creation mode, the CPU resources consumed by each frame will be controlled, but the creation time will be slightly longer than the synchronous creation. E.g:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> handler = <span class="keyword">new</span> AsyncOperation();</div><div class="line">    </div><div class="line">    fgui.UIPackage.createObjectAsync(<span class="string">"包名"</span>,<span class="string">"组件名"</span>, myCreateObjectCallback);</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">myCreateObjectCallback</span>(<span class="params">obj:fgui.Gobject</span>)</span></div><div class="line"><span class="function">    </span>&#123;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>The interface is usually closed by hiding, that is:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="comment">// If it is added to GRoot or other parent nodes</span></div><div class="line">    view.removeFromParent ();</div><div class="line"></div><div class="line">    <span class="comment">// if it is a window</span></div><div class="line">    view.hide ();</div></pre></td></tr></table></figure>
<p>If the interface is no longer used, you can destroy it:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">view.Dispose ();</div></pre></td></tr></table></figure>
<p>When the scene changes, all interfaces will be destroyed. If you do not want to be destroyed, you need to set the root node to be resident after creating the interface, and be sure to close the interface before switching scenes.</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">cc.game.addPersistNode(view.node);</div></pre></td></tr></table></figure>
<h2 id="coordinate-system"><a href="#coordinate-system" class="headerlink" title="coordinate system"></a>coordinate system</h2><p>The x / y / position values in GObject are all<strong>Local coordinates</strong>, Which is the offset from the parent component. GObject does not provide direct properties to obtain the global coordinates of the object, but provides methods to convert.</p>
<p>If you want to get the coordinates of any UI element on the screen, you can use:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> screenPos:cc.Vec2 = aObject.localToGlobal(cc.Vec2.ZERO);</div></pre></td></tr></table></figure>
<p>(Note that the screen mentioned here refers to the screen in FairyGUI semantics, with the upper left corner of the screen as the origin, not the screen in Creator semantics)</p>
<p>Conversely, if you want to get the local coordinates of the screen coordinates on the UI element, you can use:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> localPos:cc.Vec2 = aObject.globalToLocal(screenPos);</div></pre></td></tr></table></figure>
<h2 id="Event-system"><a href="#Event-system" class="headerlink" title="Event system"></a>Event system</h2><p>FairyGUI uses Creator’s event system directly, so GObject.on / off is actually implemented through GObject.node.on / off, that is, any event operation can be performed through GObject.node, including custom events. In the event callback, the currentTarget in cc.Event reflects which node this event was dispatched. If you want to get which GObject this node corresponds to, you can use this method:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">aObject.on(someEventName, this.onHandle, this);</div><div class="line"></div><div class="line">    onHandle(evt:cc.Event) &#123;</div><div class="line">        cc.log(evt.currentTarget); //node对象</div><div class="line">        cc.log(fgui.GObject.cast(evt.currentTarget)); //gobject对象</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="Mouse-touch-events"><a href="#Mouse-touch-events" class="headerlink" title="Mouse / touch events"></a>Mouse / touch events</h2><p>For mouse events and touch events, FairyGUI uses custom events. The constants are defined in fgui.Event, which is different from Creator’s own cc.Node.EventType.TOUCH_BEGIN. Please note the difference. Because Creator’s own touch logic is difficult to handle penetration / non-penetration, and custom area clicks.</p>
<p>The mouse / touch event callback function has one parameter: evt: fgui.Event, fgui.Event inherits from cc.Event.</p>
<ul>
<li><p><code>TOUCH_BEGIN</code>The mouse button is pressed (left, middle, right), or the finger is pressed. Mouse buttons can be obtained from evt.button, 0-left button, 1-middle button, 2-right button. If it is a touch event, you can get the finger ID from evt.touchId; if it is a mouse event, evt.touchId is always 0.</p>
</li>
<li><p><code>TOUCH_MOVE</code>The mouse pointer moves or your finger moves on the screen. This event will only be triggered in two cases. 1. evt.captureTouch () is called in TOUCH_BEGIN, then subsequent movement events will be triggered on this object (regardless of the position of the finger or pointer above the object). 2. TOUCH_MOVE on GRoot will always trigger, no need to use captureTouch to capture.</p>
</li>
<li><p><code>TOUCH_END</code>The mouse button is released or your finger is off the screen. If the mouse or touch position is no longer within the range of the GObject, then the component’s TouchEnd event will not be triggered. If it is really needed, you can call evt.captureTouch () in TOUCH_BEGIN to request capture.</p>
</li>
<li><p><code>CLICK</code>Click event. You can determine whether to click or double-click from evt.isDoubleClick. There is a shortcut for listening for click events: GObject.onClick (callback, …), which is simpler than GObject.on (fgui.Event.CLICK, …).</p>
</li>
<li><p><code>ROLL_OVER</code>Fired when the mouse pointer or finger moves into the display object area.</p>
</li>
<li><p><code>ROLL_OUT</code>Fired when the mouse pointer or finger moves out of the display object area.</p>
</li>
<li><p><code>MOUSE_WHEEL</code>Mouse scroll event.</p>
</li>
</ul>
<p>If you are not in the event callback process and need to get the current mouse or finger position, you can use:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="comment">// touchId is the finger id, if you don't care about this, don't pass in</span></div><div class="line">    <span class="keyword">let</span> pos1: cc.Vec2 = fgui.GRoot.inst.getTouchPosition (touchId);</div></pre></td></tr></table></figure>
<p>At any time, if you need to get the current clicked object, or the object under the mouse, you can get it in the following ways:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line"><span class="keyword">let</span> obj: fgui.GObject = fgui.GRoot.inst.touchTarget;</div><div class="line"></div><div class="line">    <span class="comment">// determine if it is in a certain component</span></div><div class="line">    cc.Log (testComponent.isAncestorOf (obj));</div></pre></td></tr></table></figure>
<h2 id="Font"><a href="#Font" class="headerlink" title="Font"></a>Font</h2><p>If you want to use ttf fonts, these steps are needed:</p>
<ol>
<li><p>You first need to get the cc.Font object. Whether you obtain this object from loadRes or directly in the scene through script variables, you can follow the project requirements.</p>
</li>
<li><p>Use fgui.UIConfig.registerFont to register a cc.Font with a font name used in FairyGUI. Assuming that aFont is the cc.Font object:</p>
</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">fgui.UIConfig.registerFont(<span class="string">'myfont'</span>, aFont);</div></pre></td></tr></table></figure>
<ol>
<li>If this is a global font:</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">fgui.UIConfig.defaultFont = <span class="string">'myFont'</span>;</div></pre></td></tr></table></figure>
<ol>
<li>If this is a font specified by a certain text, for example:</li>
</ol>
<p><img src="../../images/2016-07-06_143622.png" alt=""></p>
<p>A font with the name “Heihe” is used here. This is a different font from UIConfig.defaultFont, so we need to register this font. which is:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><div class="line">fgui.UIConfig.registerFont (<span class="string">'Bold'</span>, aFont);</div></pre></td></tr></table></figure>

    
    <div class="footer">
      found mistake? Want to participate in editing?
      <a href="https://github.com/fairygui/en.fairygui.io/tree/master/src/guide/sdk/creator.md" target="_blank">
        Edit this page on Github!
      </a>
    </div>
</div>

                
            </div>
            <script src="/docs/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->        
        <script src="/docs/js/css.escape.js"></script>
        <script src="/docs/js/common.js"></script>
    </body>
</html>
